<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Cửa hàng bán bánh</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container">
    <!-- Bên trái -->
    <section class="left">
      <div class="logo">
        <img src="anhlogo.png" alt="Logo cửa hàng">
        <div>
          <div class="shop-name">Bánh Bông</div>
          <div class="shop-tagline">Ngọt ngào mỗi ngày</div>
        </div>
      </div>

      <h1>Chào mừng đến với cửa hàng bán bánh</h1>
      <p>Tại đây bạn có thể đăng ký tài khoản để đặt bánh, lưu đơn hàng và theo dõi khuyến mãi.</p>

      <div class="products">
        <div class="product">🎂 Bánh kem matcha</div>
        <div class="product">🧁 Cupcake dâu</div>
        <div class="product">🍰 Bánh mousse</div>
      </div>

      <p class="note">Đã có tài khoản? Chuyển sang tab Đăng nhập để vào tài khoản của bạn.</p>
    </section>

    <!-- Bên phải -->
    <section class="right">
      <nav class="tabs">
        <div class="tab active" id="tab-login">Đăng nhập</div>
        <div class="tab" id="tab-register">Đăng ký</div>
      </nav>

      <div id="messages" class="small"></div>

      <!-- Form đăng nhập -->
      <form id="form-login">
        <input id="login-email" type="email" placeholder="Email" required>
        <input id="login-password" type="password" placeholder="Mật khẩu" required>
        <button type="submit" class="btn primary">Đăng nhập</button>
      </form>

      <!-- Form đăng ký -->
      <form id="form-register" style="display:none">
        <input id="reg-name" type="text" placeholder="Họ và tên" required>
        <input id="reg-email" type="email" placeholder="Email" required>
        <input id="reg-password" type="password" placeholder="Mật khẩu (≥6 ký tự)" required>
        <input id="reg-password2" type="password" placeholder="Xác nhận mật khẩu" required>
        <button type="submit" class="btn primary">Tạo tài khoản</button>
        <div class="small">Bằng việc tạo tài khoản bạn đồng ý với <a href="#">Điều khoản</a>.</div>
      </form>
    </section>
  </main>

  <script>
    const $ = id => document.getElementById(id);
    const tabLogin = $("tab-login"), tabRegister = $("tab-register");
    const formLogin = $("form-login"), formRegister = $("form-register");
    const messages = $("messages");

    function showMessage(text, type="") {
      messages.textContent = text;
      messages.className = type ? type + " small" : "small";
    }
    function switchTo(tab) {
      if(tab==="login"){
        tabLogin.classList.add("active"); tabRegister.classList.remove("active");
        formLogin.style.display="flex"; formRegister.style.display="none";
      } else {
        tabRegister.classList.add("active"); tabLogin.classList.remove("active");
        formRegister.style.display="flex"; formLogin.style.display="none";
      }
    }

    tabLogin.onclick = ()=> switchTo("login");
    tabRegister.onclick = ()=> switchTo("register");

    formRegister.onsubmit = e => {
      e.preventDefault();
      const name = $("reg-name").value.trim();
      const email = $("reg-email").value.trim().toLowerCase();
      const pw = $("reg-password").value, pw2 = $("reg-password2").value;

      if(pw.length < 6) return showMessage("Mật khẩu phải ≥6 ký tự","error");
      if(pw!==pw2) return showMessage("Mật khẩu không khớp","error");

      const users = JSON.parse(localStorage.getItem("users")||"{}");
      if(users[email]) return showMessage("Email đã tồn tại","error");

      users[email] = {name,email,password:pw};
      localStorage.setItem("users",JSON.stringify(users));
      showMessage("Đăng ký thành công! Hãy đăng nhập.","success");
      $("login-email").value = email;
      switchTo("login");
    };

    formLogin.onsubmit = e => {
      e.preventDefault();
      const email = $("login-email").value.trim().toLowerCase();
      const pw = $("login-password").value;
      const users = JSON.parse(localStorage.getItem("users")||"{}");
      const u = users[email];
      if(!u || u.password!==pw) return showMessage("Sai email hoặc mật khẩu","error");
      showMessage("Xin chào, "+u.name+"!","success");
    };

    switchTo("login");
  </script>
</body>
</html>
